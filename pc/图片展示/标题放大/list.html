<style data-merge>
    .op-img-covers-zoom-box{
        box-shadow: #646464 0 0 10px;
        position: absolute;
    }
    .op-img-covers-desktop-cont {
        position: relative;
        display: none;
    }
    .op-img-covers-pbline {
        margin-top: 0px;
    }
    .op-img-covers-divide-low {
        height: 120px;
    }
    .op-img-covers-divide-high {
        height: 160px;
    }
    .op-img-covers-link-type {
        margin-left: 0px;
        outline: none;
        text-decoration: none;
        vertical-align: middle;
        overflow: hidden;
        position: relative;
        float: left;
    }
    .op-img-covers-link-imgs{
        margin-left: -0px;
    }
    .op-img-covers-hoverview {
        position: absolute;
        display: none;
        width: 0;
        height: 0;
        text-decoration: none;
        overflow: hidden;
        outline: none;
        box-shadow: #646464 0 0 10px;
    }
    .op-img-covers-cell-bar {
        position: absolute;
        left: 0;
        bottom: 0;
        _bottom:-1px;
        background: rgba(0,0,0,0.5);
        filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='#99000000',EndColorStr='#99000000');
        width: auto;
        color: #fff;
        font-size: 12px;
        padding: 2px 7px;
        height: 16px;
        overflow: hidden;
    }
    .op-img-covers-cell-bar .op-img-covers-cell-num {
        font-family: 宋体;
    }
    .op-img-covers-class {
        margin-right: 11px;
        display: inline-block;
    }
    .op-img-covers-class-title{
        margin-right: 0px;
        float: left;
    }
    .op-img-covers-link-menu{
        display: block;
        overflow: hidden;
        height: 20px;
        zoom:1;
    }
    .op-img-covers-tag-more{
        display: none;
    }
    .op-img-covers-hide{
        display: none;
    }
    .op-img-covers-img {
        background-color: white;
    }
</style>
<div class="result-op c-container xpath-log" srcid="4" id="1">
    <h3 class="t c-gap-bottom-small">
        <a href="#" target="_blank">
        <em>美女</em>_海量精选高清图片_百度图片</a>
    </h3>
    <div class="op-img-covers-desktop-cont" style="display: block;">
        <div class="op-img-covers-divide-high">
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-top-pics op-img-covers-divide-high" data-index="index0" style="width: 113px;">
                <img src="http://t11.baidu.com/it/u=1672318057,1515839253&amp;fm=56" class="op-img-covers-link-imgs" style="width: 120px; height: 160px; margin-left: -4px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">性感</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-top-pics op-img-covers-divide-high" data-index="index1" style="width: 104px;">
                <img src="http://t11.baidu.com/it/u=1114929802,586693448&amp;fm=56" class="op-img-covers-link-imgs" style="width: 111px; height: 160px; margin-left: -4px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">明星</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-top-pics op-img-covers-divide-high" data-index="index2" style="width: 105px;">
                <img src="http://t12.baidu.com/it/u=1508527142,970092731&amp;fm=56" class="op-img-covers-link-imgs" style="width: 112px; height: 160px; margin-left: -4px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">气质</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-top-pics op-img-covers-divide-high" data-index="index3" style="width: 116px;">
                <img src="http://t10.baidu.com/it/u=1418851008,1297568720&amp;fm=56" class="op-img-covers-link-imgs" style="width: 124px; height: 160px; margin-left: -4px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">时尚</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-top-pics op-img-covers-divide-high" data-index="index4" style="width: 100px;">
                <img src="http://t10.baidu.com/it/u=1247333313,651163975&amp;fm=56" class="op-img-covers-link-imgs" style="width: 106px; height: 160px; margin-left: -3px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">清纯可爱</span>
                </div>
            </a>
        </div>
        <div class="op-img-covers-divide-high">
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-bottom-pics op-img-covers-divide-high" data-index="index5" style="width: 93px;">
                <img src="http://t11.baidu.com/it/u=1305381823,702833861&amp;fm=56" class="op-img-covers-link-imgs" style="width: 106px; height: 160px; margin-left: -7px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">古装</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-bottom-pics op-img-covers-divide-high" data-index="index6" style="width: 96px;">
                <img src="http://t11.baidu.com/it/u=1374569368,669096709&amp;fm=56" class="op-img-covers-link-imgs" style="width: 110px; height: 160px; margin-left: -7px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">人体艺术</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-bottom-pics op-img-covers-divide-high" data-index="index7" style="width: 105px;">
                <img src="http://t11.baidu.com/it/u=1625923597,1003579957&amp;fm=56" class="op-img-covers-link-imgs" style="width: 120px; height: 160px; margin-left: -8px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">非主流</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-bottom-pics op-img-covers-divide-high" data-index="index8" style="width: 104px;">
                <img src="http://t12.baidu.com/it/u=1484128046,980656547&amp;fm=56" class="op-img-covers-link-imgs" style="width: 120px; height: 160px; margin-left: -8px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">成熟</span>
                </div>
            </a>
            <a target="_blank" href="#" class="op-img-covers-link-type op-img-covers-bottom-pics op-img-covers-divide-high">
                <img src="http://img0.bdstatic.com/img/image/wantu_from_aladdin.jpg" class="op-img-covers-link-imgs" style="width:140px;height:160px;">
                <div class="op-img-covers-cell-bar">
                    <span class="op-img-covers-cell-num">真人视频互动</span>
                </div>
            </a>
        </div>
        <a target="_blank" class="op-img-covers-hoverview op-img-covers-hover" href="#" style="display: block; left: 213.20544941158676px; top: -5.782172325201156px; width: 112.58910117682652px; height: 171.56434465040232px; overflow: hidden;">
            <img src="http://t12.baidu.com/it/u=1508527142,970092731&amp;fm=56" class="op-img-covers-img" style="width: 120.09504125528161px; height: 171.56434465040232px; cursor: pointer; margin-left: -4.289108616260058px; display: inline-block; overflow: hidden;">
            <div class="op-img-covers-cell-bar">
                <span class="op-img-covers-cell-num">气质</span>
            </div>
        </a>
    </div>
    <div class="c-gap-top-small c-gap-bottom-small">
        <div class="c-gap-top-small c-gap-bottom-small">
            <span class="op-img-covers-class-title">美女身材：</span>
            <span class="op-img-covers-link-menu op-img-covers-tagCon1">
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>

                <a href="#" target="_blank" class="op-img-covers-class op-img-covers-tag-more op-img-covers-more1">更多</a>
            </span>
        </div>
        <div class="c-gap-top-small c-gap-bottom-small">
            <span class="op-img-covers-class-title">服饰美女：</span>
            <span class="op-img-covers-link-menu op-img-covers-tagCon2">
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a> <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
                <a href="#" class="op-img-covers-class op-img-covers-tag1" target="_blank">美腿</a>
            </span>
        </div>
    </div>
    <div class="c-gap-top-small">
        <span class="c-showurl">
            <span class="c-showurl">image.baidu.com </span>
            <span class="c-tools" id="tools_4729608925819343370" data-tools="{title:'美女_海量精选高清图片_百度图片',url:'http://image.baidu.com/i?tn=baiduimage&amp;ipn=r&amp;ct=201326592&amp;cl=2&amp;lm=-1&amp;st=-1&amp;sf=1&amp;fmq=1389861203899_R&amp;pv=&amp;ic=0&amp;nc=1&amp;z=&amp;se=1&amp;showtab=0&amp;fb=0&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;ie=utf-8&amp;ala=4&amp;ori_query=%E7%BE%8E%E5%A5%B3&amp;fr=ala_meinv&amp;word=%E7%BE%8E%E5%A5%B3'}">
                <a class="c-tip-icon">
                    <i class="c-icon c-icon-triangle-down-g"></i>
                </a>
            </span>&nbsp;-&nbsp;
            <a href="http://image.baidu.com/i?tn=baiduimage&amp;ct=201326592&amp;lm=-1&amp;cl=2&amp;nc=1&amp;ala=4&amp;fr=ala_meinv1&amp;alaLink=4&amp;word=%E7%BE%8E%E5%A5%B3&amp;ori_query=%E7%BE%8E%E5%A5%B3&amp;ie=utf-8#z=0&amp;width=0&amp;height=0&amp;pn=0" target="_blank" class="op_trickimage_showurl c-gray">查看全部3,200,000张图片</a>
        </span>
    </div>
</div>
<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
<script>
    // A.setup(function(){
        var that=this;
        var maxWidth =parseInt($('.c-container').css('width'));
        // var imgData=new Function('return '+that.data.datas)(),
        //     topImgsNum=that.data.topImgsNum,
        //     bottomImgsNum=that.data.bottomImgsNum,
        //     tagArrLength=that.data.tagArrLength,
        //     lineHeight=that.data.lineHeight,
        //     onlyOneLine=that.data.onlyOneLine;
        var $imgItems = $('.op-img-covers-desktop-cont');
        var $hoverView = $('.op-img-covers-hoverview');
        var $topImgs = $('.op-img-covers-top-pics'),
            $bottomImgs=$('.op-img-covers-bottom-pics');
        var topImgsData=[],bottomImgsData=[];
        // topImgsData=imgData.slice(0,topImgsNum),bottomImgsData=imgData.slice(topImgsNum,topImgsNum+bottomImgsNum);

        /*************处理图片***************/
        function zoomImgs(target) {
            var imgs = [].concat(target);
            for(var i=0,len=imgs.length;i<len;i++) {
                var item=imgs[i];
                imgs[i].width =Math.floor(item.ImageWidth/(item.ImageHeight/lineHeight));
                imgs[i].height=lineHeight;
            }
            return imgs;
        };
        // topImgsData = zoomImgs(topImgsData);
        // if(!onlyOneLine){
        //     bottomImgsData = zoomImgs(bottomImgsData);
        // }
        function getLinkwidth(data,maxWidth) {
            if(!$.isArray(data)) {
                return;
            }
            var length=data.length;
            var width=0;
            for(var i=0;i<length;i++) {
                width += data[i].width;
            }
            var rangeWidth = width - maxWidth;//需要调整的宽度
            var aWidth=[];
            var newWidth=0;
            for(var i=0;i<length;i++) {
                var wd = Math.round(rangeWidth * data[i].width/width);
                newWidth += wd;
                aWidth.push(wd);
            }
            aWidth[aWidth.length-1] += rangeWidth-newWidth;
            for(var i=0;i<length;i++) {
                data[i].width -= aWidth[i];
                data[i].aWidth = aWidth[i];
            }
        };

        function renderImgs($obj,data) {
            if($obj.length!=data.length) {
                return ;
            }
            for(var i=0,len=$obj.length;i<len;i++) {
                var $item = $($obj[i]),$img = $item.find('img'),tplData = data[i];
                $item.css('width',tplData.width);
                $img.css('margin-left',Math.floor(-tplData.aWidth/2));
            }    
        }
        function onMouseenterImg(e){            
            //获取图片对象
            var $target = $(e.currentTarget);
            var $imgTarget = $(e.target);
            
            //判断
            if($target.hasClass('op-img-covers-hover')) {
                return ;
            }
            
            if($imgTarget.hasClass('op-img-covers-cell-bar')){
                $imgTarget = $imgTarget.parent().find('img');
            }            
            if($imgTarget.hasClass('op-img-covers-cell-num')) {
                $imgTarget = $imgTarget.parent().parent().find('img');
            }
            
            var picsNum=$target.find('.op-img-covers-cell-num').html();
            var imgOffset = $target.position(),
            width = $target.width(),
            height = $target.height();

            var $hoverImg = $('<img>');            
            if(picsNum) {
                var $hoverNum = $('<div class="op-img-covers-cell-bar"><span class="op-img-covers-cell-num">' + picsNum + '</span></div>');
            }

            var imgWidth = $imgTarget.width(),
            imgHeight=$imgTarget.height();
            
            $hoverImg.attr('src',$imgTarget.attr('src'));
            $hoverImg.addClass('op-img-covers-img');
            $hoverView.attr('href',$target.attr('href'));
            
            var hoverLinkCss={
                display:'block',
                left:imgOffset.left,
                top:imgOffset.top,
                width:width,
                height:height
            };
            var hoverImgCss={
               width:imgWidth,
               height:imgHeight,
               cursor:'pointer',
               'margin-left':$imgTarget.css('margin-left')
            };
            
            $hoverView.css(hoverLinkCss);
            $hoverImg.css(hoverImgCss);
            $hoverView.children().remove();
            $hoverView.append($hoverImg);
            
            if(picsNum) {
                $hoverView.append($hoverNum);
            }

            var hoverHeight = height + 20;
            var hoverWidth = hoverHeight / height * width;
            var hoverTop =  imgOffset.top -10;
            var hoverLeft =  imgOffset.left - (hoverWidth-width)/2;
            var imgHoverHeight =  imgHeight + 20;
            var imgHoverWidth =  imgHoverHeight/imgHeight*imgWidth;

            var afterHoverlinkCss={
                left:hoverLeft,
                top:hoverTop,
                width:hoverWidth,
                height:hoverHeight
            };
            var afterHoverimgCss={
                width:imgHoverWidth,
                height:imgHoverHeight,
                'margin-left':parseInt($imgTarget.css('margin-left'))*imgHoverHeight/imgHeight
            };
            $hoverView.stop().animate(afterHoverlinkCss,60);
            $hoverImg.stop().animate(afterHoverimgCss,60);
        };

        function onMouseleaveImg(e) {
            var $target = $(e.target);
            if($target.hasClass('op-img-covers-img')||$target.hasClass('op-img-covers-desktop-cont')||$target.hasClass('op-img-covers-link-imgs')||$target.hasClass('op-img-covers-cell-bar')||$target.hasClass('op-img-covers-cell-num')||$target.hasClass('op-img-covers-hover')) {
                return;
            }
            $hoverView.hide();
        }

        /*****************处理文字链*****************/
        function findOverFlowPos(domClassName) {
            var $linkNames=$(domClassName),positions=[];
            var top=0,result={};
            for(var i=0,len=$linkNames.length;i<len;i++) {
                var $linkItem = $($linkNames[i]);
                if(top!=$linkItem.offset().top) {
                    positions.push($linkItem.offset().top);
                    top=$linkItem.offset().top;
                }
            }
                result.line=1;
                var npos=-1,ntop=0;
                for(var i=0,len=$linkNames.length;i<len;i++) {
                    var $linkItem = $($linkNames[i]);
                    if($linkItem.offset().top==positions[0]) {
                        npos=i;
                        ntop=$linkItem.offset().top;
                    }
                    if($linkItem.offset().top>positions[0]) {
                        result.line=2;
                    }
                }
                result.pos=npos;
                result.top=ntop;
            return result;
        }

        function fixMenuMore(){
            for(var i=0;i<tagArrLength;i++) {
                var tagsClass='.op-img-covers-tag'+i;
                var $tagCon=$('.op-img-covers-tagCon'+i);
                var position = findOverFlowPos(tagsClass);
                if(position.line>1) {
                    var $tagMore=$('.op-img-covers-more'+i);
                    var $tags=$('.op-img-covers-tag'+i);
                    var $currItem=$($tags.get(position.pos));
                    $tagMore.insertBefore($currItem);
                    $tagMore.css('display','inline-block');
                }
                var range=$currItem.offset().top-position.top;
                if(range>-3&&range<3) {
                    $currItem.css('display','block');
                }
            }
        }

        this.dispose = function(){
            $(document).unbind('mouseover',onMouseleaveImg);
        };
        /*****************方法调用******************/
        // if(onlyOneLine) {
        //     getLinkwidth(topImgsData,maxWidth);
        //     renderImgs($topImgs,topImgsData);
        // }else {
        //     getLinkwidth(topImgsData,maxWidth);
        //     getLinkwidth(bottomImgsData,maxWidth);
        //     renderImgs($topImgs,topImgsData);
        //     renderImgs($bottomImgs,bottomImgsData);
        // }
        // $imgItems.show();
        $imgItems.on('mouseenter','.op-img-covers-link-type',onMouseenterImg);
        $(document).on('mouseover',onMouseleaveImg);
        // fixMenuMore();
    // });

</script>
